import{_ as g,k as b,d as v,w as i,b as n,o as y,e as t,f as C,g as _}from"./index-5995c38d.js";const h={data(){return{car:{make:"",model:"",year:new Date().getFullYear(),vinCode:"",price:"",description:"",mileage:""},images:[],imageRules:[o=>!o||o.length<=5||"Max 5 images allowed",o=>!o||o.every(e=>e.size<2e6)||"Each image must be less than 2MB"],vinRules:[o=>!!o||"VIN is required",o=>o.length===17||"VIN must be 17 characters long",o=>/^\d{17}$/.test(o)||"VIN must contain only numbers"]}},methods:{validateVin(o){this.car.vinCode=this.car.vinCode.replace(/\D/g,"").slice(0,17)},async submitCar(){if(await this.$refs.form.validate())try{const e=new FormData;Object.keys(this.car).forEach(s=>{e.append(s,this.car[s])}),this.images.forEach(s=>{e.append("images",s)}),(await b.post("http://localhost:3000/api/cars",e,{headers:{Authorization:`Bearer ${this.$store.getters.token}`,"Content-Type":"multipart/form-data"}})).status===201&&(alert("Listing created successfully"),this.$router.push("/dashboard"))}catch(e){console.error("Error creating a listing:",e)}}}};function x(o,e,m,s,l,u){const a=n("v-text-field"),d=n("v-textarea"),p=n("v-file-input"),c=n("v-btn"),V=n("v-form"),f=n("v-card");return y(),v(f,{class:"pa-4"},{default:i(()=>[t(V,{onSubmit:_(u.submitCar,["prevent"]),ref:"form"},{default:i(()=>[t(a,{modelValue:l.car.make,"onUpdate:modelValue":e[0]||(e[0]=r=>l.car.make=r),label:"Make",required:""},null,8,["modelValue"]),t(a,{modelValue:l.car.model,"onUpdate:modelValue":e[1]||(e[1]=r=>l.car.model=r),label:"Model",required:""},null,8,["modelValue"]),t(a,{modelValue:l.car.year,"onUpdate:modelValue":e[2]||(e[2]=r=>l.car.year=r),label:"Year",type:"number",required:""},null,8,["modelValue"]),t(a,{modelValue:l.car.vinCode,"onUpdate:modelValue":e[3]||(e[3]=r=>l.car.vinCode=r),label:"VIN Code",maxlength:"17",required:"",rules:l.vinRules,onInput:u.validateVin,hint:"VIN must be 17 characters long","persistent-hint":""},null,8,["modelValue","rules","onInput"]),t(a,{modelValue:l.car.price,"onUpdate:modelValue":e[4]||(e[4]=r=>l.car.price=r),label:"Price",type:"number",required:""},null,8,["modelValue"]),t(d,{modelValue:l.car.description,"onUpdate:modelValue":e[5]||(e[5]=r=>l.car.description=r),label:"Description",required:""},null,8,["modelValue"]),t(a,{modelValue:l.car.mileage,"onUpdate:modelValue":e[6]||(e[6]=r=>l.car.mileage=r),label:"Mileage",type:"number",required:""},null,8,["modelValue"]),t(p,{modelValue:l.images,"onUpdate:modelValue":e[7]||(e[7]=r=>l.images=r),label:"Car Images",multiple:"",accept:"image/*",rules:l.imageRules,required:""},null,8,["modelValue","rules"]),t(c,{type:"submit",color:"primary",block:""},{default:i(()=>e[8]||(e[8]=[C(" Create Listing ")])),_:1})]),_:1},8,["onSubmit"])]),_:1})}const q=g(h,[["render",x]]);export{q as default};
